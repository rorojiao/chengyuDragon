"""
成语数据导入工具
用于将成语数据导入到数据库中
"""

import sys
import logging
from pathlib import Path

# 添加项目根目录到路径
sys.path.insert(0, str(Path(__file__).parent.parent))

from src.data.database import IdiomDatabase
from src.utils.pinyin import PinyinUtils


# 常用成语数据（包含拼音和解释）
COMMON_IDIOMS = [
    # 四字成语
    ("车水马龙", "形容车马往来繁华热闹的景象", 1),
    ("龙马精神", "比喻人精神旺盛", 1),
    ("马到成功", "形容工作刚开始就取得成功", 1),
    ("心想事成", "心里想做的事都能做成", 1),
    ("成竹在胸", "比喻做事之前已经有通盘的考虑", 1),
    ("胸有成竹", "比喻做事之前已经有通盘的考虑", 1),
    ("五湖四海", "泛指全国各地", 1),
    ("海阔天空", "形容大自然的广阔，也比喻心胸开阔", 1),
    ("空前绝后", "从前没有过，今后也不会再有", 2),
    ("后继有人", "有后人继承前人的事业", 1),
    ("人山人海", "形容人聚集得非常多", 1),
    ("海枯石烂", "形容历时久远，比喻坚定的意志永远不变", 2),
    ("烂若披掌", "形容对情况非常熟悉", 3),
    ("掌上明珠", "比喻极受父母宠爱的儿女，特指女儿", 1),
    ("珠光宝气", "形容妇女服饰华贵富丽，闪耀着珍宝的光色", 2),
    ("气象万千", "形容景象或事物壮丽而多变化", 2),
    ("千军万马", "形容兵马很多或声势浩大", 1),
    ("马不停蹄", "比喻不停顿地向前走", 1),
    ("蹄间三寻", "形容马跑得快", 3),
    ("寻欢作乐", "寻求欢快，设法取乐", 2),
    ("乐极生悲", "高兴到极点时，发生使人悲伤的事", 2),
    ("悲欢离合", "泛指生活中经历的各种境遇和由此产生的各种心情", 1),
    ("合家团圆", "全家人聚集在一起", 1),
    ("圆木警枕", "形容刻苦自学", 3),
    ("枕戈待旦", "立志杀敌，时刻准备战斗", 2),
    ("旦夕祸福", "形容什么时候发生什么祸福都不可预料", 2),
    ("福星高照", "形容人很幸运，有福气", 1),
    ("照本宣科", "只是机械地照着本子念，不能结合实际", 2),
    ("科班出身", "比喻具有受过正规教育或训练的资格", 2),
    ("身不由己", "受到某种约束或压力，只好按照做", 1),
    ("己饥己溺", "把别人的饥饿和溺水看作是自己的饥饿和溺水", 3),
    ("溺心灭质", "沉溺于心，消灭本质", 3),
    ("质疑问难", "提出疑问，请人解答", 2),
    ("难解难分", "双方争斗或比赛相持不下，难以分出胜负", 1),
    ("分秒必争", "一分一秒也必须争取，形容抓紧时间", 1),
    ("争分夺秒", "一分一秒也不放过，形容充分利用时间", 1),
    ("秒杀全场", "瞬间征服全场", 3),
    ("扬眉吐气", "形容被压抑的心情得到舒展而感到高兴", 1),
    ("气宇轩昂", "形容精神饱满，气度不凡", 2),
    ("昂首阔步", "抬起头，迈大步，形容精神振奋，勇往直前", 1),
    ("步步高升", "形容地位、职位等层层上升", 1),
    ("升官发财", "指提升官职，增加财富", 1),
    ("财源滚滚", "钱财源源不断而来", 1),
    ("滚瓜烂熟", "形容读书或背书非常熟练", 1),
    ("熟读深思", "反复地阅读，认真地思考", 2),
    ("深思远虑", "思考得很深，筹划得很远", 2),
    ("虑周藻密", "考虑周密，辞藻细密", 3),
    ("密云不雨", "比喻虽然筹备已久，但还没有发生", 3),
    ("雨过天晴", "雨后天放晴，比喻局势由坏变好", 1),
    ("晴空万里", "天空晴朗，视野开阔", 1),
    ("里应外合", "外面攻打，里面接应", 2),
    ("合两为一", "指将两者合在一起", 3),
    ("一马当先", "形容领先于别人", 1),
    ("先见之明", "事先看清问题的能力", 2),
    ("明知故犯", "明明知道不对，却故意违犯", 2),
    ("犯上作乱", "冒犯尊长，进行叛乱", 2),
    ("乱七八糟", "形容毫无秩序和条理，乱得一塌糊涂", 1),
    ("糟糠之妻", "指贫穷时共患难的妻子", 2),
    ("妻离子散", "一家人被迫离散", 1),
    ("散兵游勇", "指没有统帅的逃散士兵", 2),
    ("勇往直前", "勇敢地一直向前进", 1),
    ("前功尽弃", "以前的功劳全部丢失", 1),
    ("弃暗投明", "离开黑暗，投向光明，比喻在政治上脱离反动阵营，投向进步方面", 2),
    ("明察秋毫", "形容目光敏锐，连极细小的东西也能看得清", 2),
    ("毫发不爽", "一点也不差", 2),
    ("爽然若失", "形容心中无主、空虚怅惘的感觉", 3),
    ("失魂落魄", "形容心神不宁或惊慌失措", 2),
    ("魄散魂飞", "形容极度恐惧", 2),
    ("飞黄腾达", "比喻官职、地位升得很快", 2),
    ("达官贵人", "指地位高的人和有身份的人", 1),
    ("人杰地灵", "指山川秀丽，人物杰出", 1),
    ("灵丹妙药", "非常灵验、能治百病的奇药", 1),
    ("药到病除", "形容医术高明", 1),
    ("除暴安良", "除掉恶人，安抚好人", 2),
    ("良药苦口", "比喻衷心的劝告，尖锐的批评，听起来觉得不舒服，但对改正缺点错误很有好处", 1),
    ("口是心非", "嘴里说的是一套，心里想的又是一套，形容心口不一致", 2),
    ("非同小可", "形容事情重要或情况严重，不能忽视", 1),
    ("可有可无", "可以有，也可以没有，形容无关紧要", 2),
    ("无所不能", "什么都会，什么都能做", 1),
    ("能者多劳", "能力强的人多承担工作", 1),
    ("劳苦功高", "劳苦辛苦，功劳很大", 1),
    ("高高在上", "形容地位高，也形容脱离群众", 2),
    ("上下一心", "上下意愿一致，同心协力", 1),
    ("心想事成", "心里想做的事都能做成", 1),
    ("成龙配套", "搭配得当，组合成套", 3),
    ("套话连篇", "全是套话，没有新意", 3),
    ("篇幅宏大", "文章篇幅很大", 3),
    ("大快人心", "指坏人受到惩罚或打击，使大家非常痛快", 1),
    ("人心所向", "人民群众所拥护的，向往的", 2),
    ("向壁虚造", "比喻不根据事实而凭空捏造", 3),
    ("造谣生事", "制造谣言，惹是生非", 2),
    ("事倍功半", "费力大而收效小", 2),
    ("半途而废", "做事中途停止，不能坚持到底", 1),
    ("废寝忘食", "顾不得睡觉，忘记了吃饭", 2),
    ("食全食美", "食品非常美味", 3),
    ("美中不足", "虽然很好，但还有缺陷", 1),
    ("足智多谋", "富有智慧，善于谋划", 2),
    ("谋事在人", "谋划事情要靠人去完成", 2),
    ("人定胜天", "人的意志和力量可以战胜自然", 2),
    ("天伦之乐", "指家庭亲人之间团聚的欢乐", 1),
    ("乐不可支", "形容快乐到了极点", 2),
    ("支支吾吾", "说话吞吞吐吐，含混躲闪", 2),
    ("吾日三省", "我每天多次反省自己", 3),
    ("省吃俭用", "形容生活节约", 1),
    ("用兵如神", "形容极善于用兵", 2),
    ("神采奕奕", "形容精神饱满，容光焕发", 2),
    ("奕奕欲生", "形容艺术形象非常生动，像活的一样", 3),
    ("生生不息", "形容生命力旺盛", 2),
    ("息事宁人", "原指不生事，不骚扰百姓，后指调解纠纷，使事情平息下来", 2),
    ("人山人海", "形容人聚集得非常多", 1),
    ("海纳百川", "比喻包容的东西非常广泛，而且数量很大", 2),
    ("川流不息", "形容行人、车马等像水流一样连续不断", 1),
    ("息怒停嗔", "停止发怒和生气", 3),
    ("嗔拳不打笑面", "比喻不可以欺凌态度和蔼的人", 3),
    ("面面俱到", "各方面都照顾到，没有遗漏", 1),
    ("到此为止", "就到这里结束", 1),
    ("止步不前", "停止脚步不往跟前走，比喻停滞不前", 2),
    ("前程似锦", "形容前途十分美好", 1),
    ("锦绣河山", "形容祖国的山河美丽", 2),
    ("山清水秀", "形容风景优美", 1),
    ("秀色可餐", "形容女子姿色非常美丽", 2),
    ("餐风露宿", "风里吃饭，露天睡觉，形容旅途或野外工作的辛苦", 2),
    ("宿弊一清", "多年的积弊都彻底清除了", 3),
    ("清心寡欲", "保持心地清净，减少欲念", 2),
    ("欲罢不能", "想停止却不能停止", 1),
    ("能说会道", "形容很会讲话", 1),
    ("道听途说", "泛指没有根据的传闻", 1),
    ("说三道四", "形容不负责任地胡乱议论", 2),
    ("四海为家", "形容志在四方或到处可以安家", 1),
    ("家家户户", "每家每户，指所有的人家", 1),
    ("户枢不蠹", "经常运动的事物不容易受侵蚀", 3),
    ("蠹国害民", "危害国家和人民", 3),
    ("民富国强", "人民富裕，国家强盛", 1),
    ("强词夺理", "硬说本来没有理的事情有理", 2),
    ("理直气壮", "理由正当充分，气势就壮", 1),
    ("壮志凌云", "形容理想宏大，气概豪迈", 2),
    ("云淡风轻", "形容天气晴好", 1),
    ("轻而易举", "形容事情很容易做", 1),
    ("举世闻名", "全世界都知道", 1),
    ("名落孙山", "比喻考试落榜", 1),
    ("山高水长", "比喻人的品德高尚，影响深远", 2),
    ("长治久安", "形容国家长期安定、巩固", 2),
    ("安居乐业", "安定地生活，愉快地工作", 1),
    ("业精于勤", "学业或技艺的精进在于勤奋", 2),
    ("勤能补拙", "勤奋可以弥补天资的不足", 2),
    ("拙嘴笨舌", "形容不善于说话", 2),
    ("舌战群儒", "同很多人辩论，并驳倒对方", 3),
    ("儒雅风流", "形容文雅而风流倜傥", 3),
    ("流芳百世", "美名永远流传后世", 2),
    ("世外桃源", "比喻理想中生活安乐的世界", 1),
    ("源远流长", "河流的源头很远，水流很长", 1),
    ("长风破浪", "比喻志向远大，气魄雄伟，奋勇前进", 2),
    ("浪子回头", "比喻悔过自新", 2),
    ("头头是道", "形容说话做事有条有理", 1),
    ("道高魔重", "形容法力高强", 3),
    ("重整旗鼓", "比喻失败后积聚力量，重新行动", 1),
    ("鼓舞人心", "使人振作奋发", 1),
    ("心花怒放", "形容内心高兴极了", 1),
    ("放虎归山", "比喻放走敌人，留下祸根", 2),
    ("山崩地裂", "山倒塌，地裂开，形容声响巨大或变化剧烈", 2),
    ("裂土分邦", "划分土地，分封诸侯", 3),
    ("邦家之光", "国家的光荣", 3),
    ("光天化日", "形容大庭广众，大家看得清楚的地方", 1),
    ("日月如梭", "形容时间过得很快", 1),
    ("梭天摸地", "形容上天下地搜寻", 3),
    ("地久天长", "形容时间悠久", 1),
    ("长生不老", "永远活着", 1),
    ("老当益壮", "年纪虽大，但志气和身体更壮", 2),
    ("壮心不已", "形容豪壮的志愿永不停息", 2),
    ("已所不欲", "自己不愿意的，不要强加给别人", 2),
    ("欲盖弥彰", "想掩盖坏事实，结果反而更明显", 2),
    ("彰明较著", "形容极其明显", 3),
    ("著书立说", "从事著述和立说", 2),
    ("说长道短", "议论别人的好坏是非", 2),
    ("短小精悍", "形容人身材矮小而精明强干", 2),
    ("悍然不顾", "凶暴蛮横，不顾一切", 3),
    ("顾全大局", "照顾到整体利益", 1),
    ("局外之人", "指与某事无关的人", 3),
    ("人之常情", "一般人通常有的感情或想法", 1),
    ("情不自禁", "感情激动得不能控制", 1),
    ("禁暴正乱", "禁除暴行，整治混乱", 3),
    ("乱作一团", "形容混乱的样子", 1),
    ("团花簇锦", "形容花朵繁茂，色彩华丽", 3),
    ("锦绣前程", "形容前途十分美好", 1),
    ("程门立雪", "形容尊师重道", 3),
    ("雪中送炭", "比喻在别人急需时给以物质上或精神上的帮助", 1),
    ("炭火之功", "比喻极大的功劳", 3),
    ("功败垂成", "事情在将要成功的时候失败了", 2),
    ("成千上万", "形容数量很多", 1),
    ("万水千山", "形容路途遥远", 1),
    ("山穷水尽", "形容无路可走，陷入绝境", 2),
    ("尽善尽美", "非常完美，没有缺陷", 1),
    ("美人迟暮", "比喻美人年老色衰", 3),
    ("暮气沉沉", "形容精神萎靡不振", 2),
    ("沉鱼落雁", "形容女子容貌美丽", 2),
    ("雁过拔毛", "比喻人爱占便宜，见有利可图就插一手", 2),
    ("毛手毛脚", "形容做事粗鲁不细致", 2),
    ("脚踏实地", "形容做事踏实认真", 1),
    ("地动山摇", "声势浩大或威力强大", 2),
    ("摇旗呐喊", "比喻为别人助长声势", 2),
    ("喊冤叫屈", "为所受的冤屈叫喊", 2),
    ("屈指可数", "形容数目很少，扳着手指头就能数过来", 1),
    ("数一数二", "形容很突出，排在前面", 1),
    ("二龙戏珠", "两条龙相对，戏玩一颗宝珠", 2),
    ("珠联璧合", "形容杰出的人才或美好的事物结合在一起", 2),
    ("合情合理", "合乎情理", 1),
    ("理屈词穷", "理由站不住脚，被驳得没话可说", 2),
    ("穷途末路", "形容到了无路可走的地步", 2),
    ("路不拾遗", "形容社会风气良好", 2),
    ("遗臭万年", "恶名永远流传", 2),
    ("万古长青", "形容永远保持生机", 1),
    ("青山绿水", "形容风景优美", 1),
    ("水落石出", "比喻事情真相大白", 1),
    ("出神入化", "形容技艺达到了绝妙的境界", 2),
    ("化险为夷", "使危险的情况变得平安", 1),
    ("夷然自若", "形容神态镇定，一点也不慌张", 3),
    ("若无其事", "好像没有那么回事似的", 1),
    ("事必躬亲", "不管什么事都亲自去办", 2),
    ("亲如手足", "形容关系非常亲密", 1),
    ("足不出户", "形容不与外界接触", 2),
    ("户限为穿", "形容来往的人很多", 3),
    ("穿针引线", "比喻从中联系、牵合、拉拢", 2),
    ("线断风筝", "比喻断绝联系", 3),
    ("春风化雨", "比喻良好的教育", 2),
    ("雨后春笋", "比喻新生事物迅速大量地涌现出来", 2),
    ("笋盘得利", "比喻获得意外的好处", 3),
    ("利令智昏", "贪图利益，使人头脑发昏，丧失理智", 2),
    ("昏天黑地", "形容天色昏暗或秩序混乱", 2),
    ("地广人稀", "形容土地广阔，人烟稀少", 2),
    ("稀世之宝", "世上稀有的珍宝", 2),
    ("宝刀不老", "比喻虽然年龄已大或脱离本行已久，但功夫技术并没减退", 2),
    ("老骥伏枥", "比喻有志向的人虽然年老，但仍有雄心壮志", 2),
    ("枥马不嘶", "形容战马经过训练，驯良有纪律", 3),
    ("嘶马力竭", "形容力量用尽", 3),
    ("竭泽而渔", "比喻只图眼前利益，不作长远打算", 2),
    ("渔翁得利", "比喻双方争执不下，结果两败俱伤，让第三者获利", 2),
    ("利欲熏心", "贪财图利的欲望迷住了心窍", 2),
    ("心直口快", "形容性情直爽，说话不拐弯", 1),
    ("快马加鞭", "比喻快上加快", 1),
    ("鞭长莫及", "比喻力量达不到", 2),
    ("及锋而试", "趁锐气正盛时使用", 3),
    ("试才录用", "根据才能的大小给以录用", 3),
    ("用之不竭", "用不完，形容非常丰富", 1),
    ("竭尽全力", "用尽全部力量", 1),
    ("力挽狂澜", "比喻尽力挽回危险的局势", 2),
    ("澜倒波随", "比喻事情随波逐流，没有主见", 3),
    ("随波逐流", "比喻没有主见，随着外界形势走", 1),
    ("流年不利", "形容时运不好", 2),
    ("利路通融", "形容在利益方面可以通融", 3),
    ("融会贯通", "把各方面的知识和道理融化汇合，得到全面透彻的理解", 2),
    ("通情达理", "说话做事通人情，合道理", 1),
    ("理屈词穷", "理由站不住脚，被驳得没话可说", 2),
    ("穷山恶水", "形容自然条件很差的地方", 2),
    ("水滴石穿", "比喻力量虽小，只要坚持不懈，事情就能成功", 1),
    ("穿云裂石", "形容声音高亢嘹亮", 2),
    ("石沉大海", "比喻始终没有消息", 1),
    ("海阔天空", "形容大自然的广阔，也比喻心胸开阔", 1),
    ("空穴来风", "比喻流言乘虚而入", 2),
    ("风起云涌", "形容雄浑的气势或规模宏大的事物", 1),
    ("涌泉相报", "比喻以微小的力量回报巨大的恩惠", 3),
    ("报仇雪恨", "报复冤仇，洗刷仇恨", 2),
    ("恨之入骨", "形容痛恨到极点", 2),
    ("骨肉相连", "比喻关系极其密切", 2),
    ("连绵不断", "形容连续不止", 1),
    ("断章取义", "不顾全篇文章或谈话的内容，孤立地取其中的一段或一句的意思", 2),
    ("义不容辞", "道义上不允许推辞", 1),
    ("辞旧迎新", "抛弃旧的事物，迎接新的事物", 1),
    ("新陈代谢", "比喻新事物滋生发展，代替旧事物", 2),
    ("谢天谢地", "感谢上天和大地，形容非常感激", 1),
    ("地大物博", "形容国家疆土辽阔，资源丰富", 1),
    ("博大精深", "形容思想和学识广博高深", 2),
    ("深谋远虑", "计划周密，考虑长远", 1),
    ("虑周藻密", "考虑周密，辞藻细密", 3),
]

# 按首字分类的成语数据（用于测试接龙）
IDIOM_CHAINS = {
    "龙": [
        ("龙飞凤舞", "形容山势蜿蜒雄壮，也形容书法笔势有力", 1),
        ("龙马精神", "比喻人精神旺盛", 1),
        ("龙潭虎穴", "比喻极险恶的地方", 2),
        ("龙争虎斗", "形容斗争或竞赛很激烈", 1),
        ("龙凤呈祥", "指吉庆之事", 1),
    ],
    "马": [
        ("马到成功", "形容工作刚开始就取得成功", 1),
        ("马不停蹄", "比喻不停顿地向前走", 1),
        ("马首是瞻", "比喻追随别人行动", 2),
        ("马革裹尸", "形容军人战死沙场", 2),
    ],
    "成": [
        ("成竹在胸", "比喻做事之前已经有通盘的考虑", 1),
        ("成千上万", "形容数量很多", 1),
        ("成群结队", "形容聚集在一起", 1),
        ("成年累月", "形容历时很久", 2),
    ],
    "功": [
        ("功败垂成", "事情在将要成功的时候失败了", 2),
        ("功成名就", "功业建立了，名声也有了", 1),
        ("功不可没", "功劳极大，不可抹灭", 1),
        ("功德圆满", "比喻举办事情圆满结束", 1),
    ],
    "名": [
        ("名落孙山", "比喻考试落榜", 1),
        ("名扬四海", "形容名声很大", 1),
        ("名不虚传", "流传开来的名声与实际相符", 1),
        ("名正言顺", "名义正当，道理也讲得通", 1),
    ],
    "山": [
        ("山清水秀", "形容风景优美", 1),
        ("山穷水尽", "形容无路可走，陷入绝境", 2),
        ("山高水长", "比喻人的品德高尚，影响深远", 2),
        ("山盟海誓", "形容誓言可信程度极高", 2),
    ],
    "水": [
        ("水落石出", "比喻事情真相大白", 1),
        ("水滴石穿", "比喻力量虽小，只要坚持不懈，事情就能成功", 1),
        ("水到渠成", "比喻条件成熟，事情自然成功", 1),
        ("水中捞月", "比喻白费力气，无法实现", 2),
    ],
    "心": [
        ("心想事成", "心里想做的事都能做成", 1),
        ("心直口快", "形容性情直爽，说话不拐弯", 1),
        ("心旷神怡", "心情舒畅，精神愉快", 2),
        ("心花怒放", "形容内心高兴极了", 1),
    ],
    "事": [
        ("事倍功半", "费力大而收效小", 2),
        ("事必躬亲", "不管什么事都亲自去办", 2),
        ("事与愿违", "事情的发展与愿望相反", 2),
        ("事在人为", "事情的成功全在于人的努力", 1),
    ],
    "天": [
        ("天伦之乐", "指家庭亲人之间团聚的欢乐", 1),
        ("天长地久", "形容时间悠久", 1),
        ("天马行空", "比喻气势豪放，不受拘束", 2),
        ("天天向上", "比喻每天进步", 1),
    ],
}


def import_common_idioms(db: IdiomDatabase):
    """导入常用成语"""
    logging.info("开始导入常用成语...")
    count = 0

    for word, explanation, difficulty in COMMON_IDIOMS:
        # 生成拼音
        pinyin = PinyinUtils.get_pinyin(word, style='tone')
        first_char = word[0]
        last_char = word[-1]
        first_pinyin = PinyinUtils.get_first_char_pinyin(first_char)
        last_pinyin = PinyinUtils.get_first_char_pinyin(last_char)

        from src.data.models import Idiom
        idiom = Idiom(
            word=word,
            pinyin=pinyin,
            first_char=first_char,
            last_char=last_char,
            first_pinyin=first_pinyin,
            last_pinyin=last_pinyin,
            explanation=explanation,
            difficulty=difficulty,
            frequency=float(5 - difficulty)  # 简单的频率计算
        )

        if db.add_idiom(idiom):
            count += 1

    logging.info(f"成功导入 {count} 个常用成语")
    return count


def import_chain_idioms(db: IdiomDatabase):
    """导入接龙成语"""
    logging.info("开始导入接龙成语...")
    count = 0

    for starting_char, idiom_list in IDIOM_CHAINS.items():
        for word, explanation, difficulty in idiom_list:
            # 生成拼音
            pinyin = PinyinUtils.get_pinyin(word, style='tone')
            first_char = word[0]
            last_char = word[-1]
            first_pinyin = PinyinUtils.get_first_char_pinyin(first_char)
            last_pinyin = PinyinUtils.get_first_char_pinyin(last_char)

            from src.data.models import Idiom
            idiom = Idiom(
                word=word,
                pinyin=pinyin,
                first_char=first_char,
                last_char=last_char,
                first_pinyin=first_pinyin,
                last_pinyin=last_pinyin,
                explanation=explanation,
                difficulty=difficulty,
                frequency=float(5 - difficulty)
            )

            if db.add_idiom(idiom):
                count += 1

    logging.info(f"成功导入 {count} 个接龙成语")
    return count


def main():
    """主函数"""
    logging.basicConfig(
        level=logging.INFO,
        format='%(asctime)s - %(levelname)s - %(message)s'
    )

    # 数据库路径
    db_path = "resources/idioms.db"

    logging.info(f"数据库路径: {db_path}")

    # 创建数据库
    db = IdiomDatabase(db_path)

    # 导入成语
    total_count = 0
    total_count += import_common_idioms(db)
    total_count += import_chain_idioms(db)

    logging.info(f"总共导入 {total_count} 个成语")
    logging.info(f"数据库现有 {db.get_total_count()} 个成语")

    # 测试查询
    logging.info("\n测试查询功能:")
    test_queries = ["车水马龙", "龙马精神", "马到成功"]
    for query in test_queries:
        idiom = db.get_idiom_by_name(query)
        if idiom:
            logging.info(f"  ✓ {query}: {idiom.explanation}")
        else:
            logging.info(f"  ✗ {query}: 未找到")

    # 测试按首字查询
    logging.info("\n测试按首字查询 '龙':")
    idioms = db.get_idioms_by_starting_char("龙")
    for idiom in idioms[:5]:  # 只显示前5个
        logging.info(f"  - {idiom.word}: {idiom.explanation}")

    db.close()


if __name__ == '__main__':
    main()
